/* qing-sortable v0.0.1 | (c) Mycolorway Design | MIT License */
!function(t,e){"object"==typeof module&&module.exports?module.exports=e(require("jquery"),require("qing-module")):t.QingSortable=e(t.jQuery,t.QingModule)}(this,function(t,e){var r=require=function t(e,r,n){function o(a,u){if(!r[a]){if(!e[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return o(r?r:t)},c,c.exports,t,e,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({"qing-sortable":[function(r,n,o){var i,a,u,s,l,c=function(t,e){function r(){this.constructor=t}for(var n in e)f.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},f={}.hasOwnProperty;a=null,s=null,u=!1,l=function(t,e){var r;return null==e&&(e=100),r=null,function(){var n,o;return o=this,n=arguments,window.clearTimeout(r),r=window.setTimeout(function(){return t.apply(o,n)},e)}},i=function(e){function r(e){if(r.__super__.constructor.apply(this,arguments),this.sortable=t(this.opts.sortable),!(this.sortable.length>0))throw new Error("QingSortable: option sortable is required");this.opts=t.extend({},r.opts,this.opts),this._render(),this._bind()}return c(r,e),r.opts={container:null,connect:null,sortable:null,customDragImage:!1},r.prototype._render=function(){return this.sortable.each(function(t,e){return e.draggable=!0})},r.prototype._bind=function(){return this.sortable.on("dragstart.qingSortable",function(e){return function(r){var n,o;return e.dragging=!0,n=t(r.currentTarget),e.opts.customDragImage&&(o=n.clone().addClass("qing-sortable-dragimage"),o.prependTo(n.parent()),r.originalEvent.dataTransfer.setDragImage(o[0],r.pageX-n.offset().left,r.pageY-n.offset().top)),e.relative={x:r.pageX-n.offset().left,y:r.pageY-n.offset().top},a=n,n.addClass("qing-sortable-placeholder"),s=n.clone().attr("data-sort-placeholder",!0)}}(this)),this.sortable.on("dragend.qingSortable",function(e){return function(r){var n;return n=t(r.currentTarget),n.removeClass("qing-sortable-placeholder"),n.removeClass("xxx"),t.contains(document,s[0])&&(n.insertAfter(s),s.detach()),a=null,e.dragging=!1}}(this)),t(this.opts.container).on("dragenter.qingSortable",function(){return u=!0}),t(this.opts.container).on("dragleave.qingSortable",function(){return u=!1}),t(document).on("dragover.qingSortable",function(e){return function(r){var n,o,i,l,c;if(0===e.sortable.filter(r.target).length&&!(t(e.opts.container).filter(r.target).length>0||t.contains(t(e.opts.container)[0],r.target))){if(e.opts.connect){if(t(e.opts.connect).filter(r.target).length>0)return;if(t.contains(t(e.opts.connect)[0],r.target))return}if(!u&&e.dragging)return s.detach(),o={x:r.pageX-e.relative.x+a.outerWidth()/2,y:r.pageY-e.relative.y+a.outerHeight()/2},n=e.sortable.map(function(e,r){var n,i,a,u;return n=t(r),u=n.offset(),i={x:u.left+n.outerWidth()/2,y:u.top+n.outerHeight()/2},a=Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2)),{delta:a,element:r,center:i}}),c=n.sort(function(t,e){return t.delta-e.delta}),l=c[0].element,i="inline"===e.opts.type?o.x<c[0].center.x?"before":"after":o.y<c[0].center.y?"before":"after",t(l)[i](s).addClass("yyy").siblings().removeClass("yyy").end()}}}(this)),this.sortable.on("dragenter.qingSortable",function(e){return function(r){var n,o,i,u;if(n=t(r.currentTarget),i=t(e.opts.container).add(e.opts.connect).filter(function(e,n){return console.log(n,r.currentTarget),t.contains(n,r.currentTarget)}),i.length>0)return o=t.contains(document,s[0])?s.index():a.index(),u=o<n.index()?"after":"before",n[u](s),a.addClass("xxx")}}(this))},r.prototype.destroy=function(){return this.sortable.off(".qingSortable"),null!=s?s.remove():void 0},r}(e),n.exports=i},{}]},{},[]);return r("qing-sortable")});