/* qing-sortable v0.0.1 | (c) Mycolorway Design | MIT License */
!function(t,e){"object"==typeof module&&module.exports?module.exports=e(require("jquery"),require("qing-module")):t.QingSortable=e(t.jQuery,t.QingModule)}(this,function(t,e){var o=require=function t(e,o,i){function r(s,a){if(!o[s]){if(!e[s]){var p="function"==typeof require&&require;if(!a&&p)return p(s,!0);if(n)return n(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=o[s]={exports:{}};e[s][0].call(l.exports,function(t){var o=e[s][1][t];return r(o?o:t)},l,l.exports,t,e,o,i)}return o[s].exports}for(var n="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({"qing-sortable":[function(o,i,r){var n,s,a,p,u,l,c,h=function(t,e){function o(){this.constructor=t}for(var i in e)f.call(e,i)&&(t[i]=e[i]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},f={}.hasOwnProperty;a=t([]),s=t([]),c=null,p=1,l=function(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))},u=function(t,e){return e.left>t.right?e.bottom<t.top?{delta:l(e.left-t.right,t.top-e.bottom),position:9}:e.top>t.bottom?{delta:l(e.left-t.right,e.top-t.bottom),position:3}:{delta:e.left-t.right,position:2}:e.right<t.left?e.bottom<t.top?{delta:l(t.left-e.right,t.top-e.bottom),position:7}:e.top>t.bottom?{delta:l(t.left-e.right,e.top-t.bottom),position:5}:{delta:t.left-e.right,position:6}:e.bottom<t.top?{delta:t.top-e.bottom,position:8}:e.top>t.bottom?{delta:e.top-t.bottom,position:4}:{delta:0,position:1}},n=function(e){function o(e){o.__super__.constructor.apply(this,arguments),this.opts=t.extend({},o.opts,this.opts),this.groups=t(this.opts.container),this.items=this.groups.find(this.opts.items),this._checkOptions(),this._cid=p++,s=s.add(this.groups),a=a.add(this.items),this._bind()}return h(o,e),o.prototype.activeItem=null,o.opts={scope:document,container:null,items:"[draggable=true]",axis:"x"},o.prototype._checkOptions=function(){if(!(this.opts.items.length>0))throw new Error("QingSortable: option items is required");if(!(this.groups.length>0))throw new Error("QingSortable: option container is required")},o.prototype._setDragImage=function(e){var o,i;return null!=(i=this.dragImage)&&i.remove(),o=t(e.currentTarget),this.dragImage=o.clone().addClass("qing-sortable-dragimage"),this.dragImage.css({width:o.width(),height:o.height()}),this.dragImage.prependTo(o.parent()),e.originalEvent.dataTransfer.setDragImage(this.dragImage[0],e.pageX-o.offset().left,e.pageY-o.offset().top)},o.prototype._cacheMousePosition=function(e){var o;return o=t(e.currentTarget),this.mousePosition={x:e.pageX-o.offset().left,y:e.pageY-o.offset().top}},o.prototype._cacheContainerDimensions=function(){return this.groupsDimensions=s.map(function(t){return function(e,o){return t._getElementDimension(o)}}(this)).get()},o.prototype._cacheItemPositions=function(){return this.itemCenters=a.map(function(e,o){var i,r;return i=t(o),r=i.offset(),{element:o,x:r.left+i.outerWidth()/2,y:r.top+i.outerHeight()/2}}).get()},o.prototype._getElementDimension=function(e){var o;return o=t(e).offset(),{top:o.top,left:o.left,bottom:o.top+t(e).outerHeight(),right:o.left+t(e).outerWidth(),element:e}},o.prototype._findNearestContainer=function(e){var o;return o=t.map(this.groupsDimensions,function(t){return function(t,o){var i;return i=u(t,e),{delta:i.delta,position:i.position,dimension:t,element:t.element}}}(this)).sort(function(t,e){return t.delta-e.delta}),o[0].element},o.prototype._getItemDimension=function(t){var e;return e={left:t.pageX-this.mousePosition.x,top:t.pageY-this.mousePosition.y},e.right=e.left+this.activeItem.outerWidth(),e.bottom=e.top+this.activeItem.outerHeight(),e},o.prototype._findNearestItem=function(e,o){var i,r,n;return n=t(o).find(this.opts.items).not(this.placeholder),r={x:(e.left+e.right)/2,y:(e.top+e.bottom)/2},i=n.map(function(e,o){var i,n,s,a;return i=t(o),a=i.offset(),n={x:a.left+i.outerWidth()/2,y:a.top+i.outerHeight()/2},s=l(r.x-n.x,r.y-n.y),{delta:s,element:o,center:n,xDelta:n.x-r.x,yDelta:n.y-r.y}}).sort(function(t,e){return t.delta-e.delta}),i[0]},o.prototype._bind=function(){return this.scope=t(this.opts.scope),this.scope.on("dragstart.qingSortable"+this._cid,this.opts.items,function(e){return function(o){var i;if(i=t(o.target),t.contains(e.groups[0],o.target))return e.isDragging=!0,e._cacheContainerDimensions(),e._cacheItemPositions(),e._cacheMousePosition(o),e._setDragImage(o),i.addClass("qing-sortable-placeholder"),e.activeItem=i,e.placeholder=i.clone()}}(this)),this.scope.on("dragover.qingSortable"+this._cid,function(e){return function(o){var i,r,n,s;if(o.preventDefault(),e.isDragging&&o.target!==e.activeItem[0]&&!t.contains(e.activeItem[0],o.target))return i=e._getItemDimension(o),s=e._findNearestContainer(i),n=e._findNearestItem(i,s),r="x"===e.opts.axis?n.xDelta>0?"before":"after":n.yDelta>0?"before":"after",t(n.element)[r](e.placeholder)}}(this)),this.scope.on("dragend.qingSortable"+this._cid,this.opts.items,function(e){return function(o){var i;if(e.isDragging)return e.activeItem.removeClass("qing-sortable-placeholder qing-sortable-hide"),e.placeholder&&t.contains(document,e.placeholder[0])&&(e.placeholder.replaceWith(e.activeItem),e.placeholder=null),i=null}}(this)),this.scope.on("dragleave.qingSortable"+this._cid,this.opts.items,function(t){return function(e){if(t.isDragging)return e.currentTarget===t.activeItem[0]?t.activeItem.removeClass("qing-sortable-placeholder").addClass("qing-sortable-hide"):void 0}}(this))},o.prototype.destroy=function(){return a=a.not(this.items),s=s.not(this.contains),this.scope.off(".qingSortable"+this._cid)},o}(e),i.exports=n},{}]},{},[]);return o("qing-sortable")});