/* qing-sortable v0.0.1 | (c) Mycolorway Design | MIT License */
!function(e,t){"object"==typeof module&&module.exports?module.exports=t(require("jquery"),require("qing-module")):e.QingSortable=t(e.jQuery,e.QingModule)}(this,function(e,t){var r=require=function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=r[s]={exports:{}};t[s][0].call(h.exports,function(e){var r=t[s][1][e];return i(r?r:e)},h,h.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({"qing-sortable":[function(r,n,i){var o,s=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return s(r,t),r.opts={el:document,groups:null,items:null,plugins:[]},r.id=1,r.getElementDimension=function(t){var r,n,i,o;return r=e(t),i=r.offset(),o=r.outerWidth(),n=r.outerHeight(),{left:i.left,top:i.top,width:o,height:n,center:{left:i.left+n/2,top:i.top+n/2},element:t}},r.excluded="[data-qing-sortable-excluded]",r.pointToDimension=function(e,t){var r,n,i,o,s,a;return s=Math.max,r=Math.abs,a=Math.sqrt,n={left:t.left+t.width/2,top:t.top+t.height/2},i=s(r(e[0]-n.left)-t.width/2,0),o=s(r(e[1]-n.top)-t.height/2,0),a(i*i+o*o)},r.prototype.activeItem=null,r.prototype.placeholder=null,r.prototype._setOptions=function(t){if(this.opts=e.extend({},r.opts,t),!this.opts.items)throw new Error("option items is required")},r.prototype._init=function(){return this.el=e(this.opts.el),this.id=r.id++,this._bind()},r.prototype._generateHelper=function(e){var t;return null!=(t=this.helper)&&t.remove(),this.helper=e.clone().addClass("qing-sortable-helper"),this.helper.outerWidth(e.outerWidth()),this.helper.outerHeight(e.outerHeight()),this.helper.attr("data-qing-sortable-excluded",!0),this.helper.prependTo(e.parent())},r.prototype._bind=function(){var t;return t=this.opts.items,this.el.on("dragstart.qingSortable"+this.id,t,function(t){return function(r){var n,i;return n=e(r.currentTarget),i=n.offset(),r.originalEvent.dataTransfer.setDragImage(t._generateHelper(n).get(0),r.pageX-i.left,r.pageY-i.top),t._onDragStart(n)}}(this)),this.el.on("dragover.qingSortable"+this.id,function(e){return function(t){return e._onDragOver(t.pageX,t.pageY)}}(this)),this.el.on("dragend.qingSortable"+this.id,function(e){return function(t){return e._onDragEnd()}}(this)),this.el.on("dragleave.qingSortable"+this.id,function(e){return function(e){}}(this))},r.prototype._cacheMousePosition=function(e,t){var r;return r=this.activeItem.offset(),this.mousePosition={x:e-r.left,y:t-r.top}},r.prototype._onDragStart=function(e){return this.activeItem=e,e.addClass("qing-sortable-placeholder"),this._cacheDimensions(),this._cacheMousePosition(),this._generatePlaceholder()},r.prototype._onDragOver=function(t,r){if(this.activeItem)return this.nearDimension=this._findNearItemDimension(t,r),e(this.nearDimension.element).addClass("qing-sortable-near").siblings().removeClass("qing-sortable-near"),this._movePlaceholderTo(this.nearDimension,[t,r]),this.activeItem.removeClass("qing-sortable-placeholder"),this.activeItem.addClass("qing-sortable-hide"),this._updateDimensions()},r.prototype._onDragEnd=function(){if(this.activeItem)return this.activeItem.removeClass("qing-sortable-placeholder qing-sortable-hide"),e(this.nearDimension.element).removeClass("qing-sortable-near"),this.placeholder.replaceWith(this.activeItem),this.activeItem=null,this.placeholder=null,this.nearDimension=null},r.prototype.destroy=function(){return this.el.off(".qingSortable"+this.id)},r.prototype._movePlaceholderTo=function(t,r){var n;return n=e(t.element),"x"===this.opts.axis?r[0]<t.center.left?n.before(this.placeholder):n.after(this.placeholder):r[1]<t.center.top?n.before(this.placeholder):n.after(this.placeholder)},r.prototype._generatePlaceholder=function(){return this.placeholder=this.activeItem.clone()},r.prototype._findNearItemDimension=function(e,t){var n;return this.opts.groups?this._findNearGroup(e,t):(n=this.dimensions.map(function(n,i){return n.delta=r.pointToDimension([e,t],n),n}).sort(function(e,t){return e.delta-t.delta}),n[0])},r.prototype._cacheDimensions=function(){var t;return t=function(e){return function(t){return t.find(e.opts.items).not(r.excluded).map(function(e,t){return r.getElementDimension(t)}).get()}}(this),this.dimensions=this.opts.groups?this.el.find(this.opts.groups).map(function(n){return function(n,i){var o;return o=r.getElementDimension(i),o.children=t(e(i),o.children),o}}(this)).get():t(this.el)},r.prototype._updateDimensions=function(){var t;return t=function(r,n){var i;if(i=e(r.element).offset(),r.left=i.left,r.top=i.top,r.children)return r.children.map(t)},this.dimensions.map(t)},r}(t),n.exports=o},{}]},{},[]);return r("qing-sortable")});