/* qing-sortable v0.0.1 | (c) Mycolorway Design | MIT License */
!function(t,e){"object"==typeof module&&module.exports?module.exports=e(require("jquery"),require("qing-module")):t.QingSortable=e(t.jQuery,t.QingModule)}(this,function(t,e){var o=require=function t(e,o,r){function n(a,s){if(!o[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var l=o[a]={exports:{}};e[a][0].call(l.exports,function(t){var o=e[a][1][t];return n(o?o:t)},l,l.exports,t,e,o,r)}return o[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)n(r[a]);return n}({"qing-sortable":[function(o,r,n){var i,a,s,u,p,l,f=function(t,e){function o(){this.constructor=t}for(var r in e)g.call(e,r)&&(t[r]=e[r]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},g={}.hasOwnProperty;i=null,a=null,p=t([]),u=t([]),l=null,s=function(e){function o(e){o.__super__.constructor.apply(this,arguments),this.opts=t.extend({},o.opts,this.opts),this.container=t(this.opts.container),this.items=this.container.find(this.opts.items),this._checkOptions(),u=u.add(this.container),p=p.add(this.items),this._bind()}return f(o,e),o.opts={scope:document,container:null,items:"[draggable=true]",axis:"x"},o.prototype._checkOptions=function(){if(!(this.opts.items.length>0))throw new Error("QingSortable: option items is required");if(!(this.container.length>0))throw new Error("QingSortable: option container is required")},o.prototype._setDragImage=function(e){var o,r;return null!=(r=this.dragImage)&&r.hide().remove(),o=t(e.currentTarget),this.dragImage=o.clone().addClass("qing-sortable-dragimage"),this.dragImage.css({width:o.width(),height:o.height()}),this.dragImage.prependTo(o.parent()),e.originalEvent.dataTransfer.setDragImage(this.dragImage[0],e.pageX-o.offset().left,e.pageY-o.offset().top)},o.prototype._cacheMousePosition=function(e){var o;return o=t(e.currentTarget),this.mousePosition={x:e.pageX-o.offset().left,y:e.pageY-o.offset().top}},o.prototype._onStart=function(t){var e;return this.dragging=!0,e=t},o.prototype._onEnd=function(){var t;return this.dragging=!1,t=null},o.prototype._shouldCalculatePosition=function(e){return!!this.dragging&&(!t(e.target).data("qingSortable")&&(e.target!==$placeholder[0]&&e.target!==$active[0]))},o.prototype._cacheContainerDimensions=function(){return this.containerDimensions=u.map(function(t){return function(e,o){return t._getDimension(o)}}(this)).get()},o.prototype._cacheItemPositions=function(){return this.itemCenters=p.map(function(e,o){var r,n;return r=t(o),n=r.offset(),{element:o,x:n.left+r.outerWidth()/2,y:n.top+r.outerHeight()/2}}).get()},o.prototype._hideActiveItem=function(t){return t.addClass("qing-sortable-hide")},o.prototype._getDimension=function(e){var o;return o=t(e).offset(),{top:o.top,left:o.left,bottom:o.top+t(e).outerHeight(),right:o.left+t(e).outerWidth(),element:e}},o.prototype._findNearestContainer=function(e){var o,r,n;return o=function(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))},r=function(t,e){return e.left>t.right?e.bottom<t.top?{delta:o(e.left-t.right,t.top-e.bottom),position:9}:e.top>t.bottom?{delta:o(e.left-t.right,e.top-t.bottom),position:3}:{delta:e.left-t.right,position:2}:e.right<t.left?e.bottom<t.top?{delta:o(t.left-e.right,t.top-e.bottom),position:7}:e.top>t.bottom?{delta:o(t.left-e.right,e.top-t.bottom),position:5}:{delta:t.left-e.right,position:6}:e.bottom<t.top?{delta:t.top-e.bottom,position:8}:e.top>t.bottom?{delta:e.top-t.bottom,position:4}:{delta:0,position:1}},n=t.map(this.containerDimensions,function(t){return function(t,o){var n;return n=r(t,e),{delta:n.delta,position:n.position,dimension:t,element:t.element}}}(this)).sort(function(t,e){return t.delta-e.delta}),n[0].element},o.prototype._getItemDimension=function(t){var e;return e={left:t.pageX-this.mousePosition.x,top:t.pageY-this.mousePosition.y},e.right=e.left+i.outerWidth(),e.bottom=e.top+i.outerHeight(),e},o.prototype._findNearestItem=function(e,o){var r,n,i;return i=t(o).find(this.opts.items).not(a),n={x:(e.left+e.right)/2,y:(e.top+e.bottom)/2},r=i.map(function(e,o){var r,i,a,s,u;return r=t(o),s=r.offset(),i={x:s.left+r.outerWidth()/2,y:s.top+r.outerHeight()/2},a=Math.sqrt(Math.pow(n.x-i.x,2)+Math.pow(n.y-i.y,2)),u={delta:a,element:o,center:i},u.xDelta=i.x-n.x,u.yDelta=i.y-n.y,u}).sort(function(t,e){return t.delta-e.delta}),r[0]},o.prototype._bind=function(){var e;return e=t(this.opts.scope),e.on("dragstart.qingSortable",this.opts.items,function(e){return function(o){var r;if(r=t(o.target),t.contains(e.container[0],o.target))return e.isDragging=!0,e._cacheContainerDimensions(),e._cacheItemPositions(),e._cacheMousePosition(o),e._setDragImage(o),r.addClass("qing-sortable-placeholder"),i=r,a=r.clone().attr({dataPlaceholder:!0})}}(this)),e.on("dragleave.qingSortable",this.opts.items,function(t){return function(e){if(t.isDragging)return e.currentTarget===i[0]?i.removeClass("qing-sortable-placeholder").addClass("qing-sortable-hide"):void 0}}(this)),e.on("dragover.qingSortable",function(e){return function(o){var r,n,i,s;if(o.preventDefault(),e.isDragging&&o.target!==ACTIVE&&!t.contains(ACTIVE,o.target))return r=e._getItemDimension(o),s=e._findNearestContainer(r),i=e._findNearestItem(r,s),n="x"===e.opts.axis?i.xDelta>0?"before":"after":i.yDelta>0?"before":"after",t(i.element)[n](a)}}(this)),e.on("dragend.qingSortable",this.opts.items,function(e){return function(o){var r,n;if(e.isDragging)return r=t(n),r.removeClass("qing-sortable-placeholder qing-sortable-hide"),a&&t.contains(document,a[0])&&(a.replaceWith(r),a=null),n=null}}(this))},o.prototype._getSortedCenters=function(e,o){var r;return r=e.map(function(e,r){var n,i,a,s;return n=t(r),s=n.offset(),i={x:s.left+n.outerWidth()/2,y:s.top+n.outerHeight()/2},a=Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2)),{delta:a,element:r,center:i}}),r.sort(function(t,e){return t.delta-e.delta})},o.prototype.destroy=function(){var t;return p=p.not(this.items),u=u.not(this.contains),this.items.off(".qingSortable"),"undefined"!=typeof $placeholder&&null!==$placeholder&&$placeholder.remove(),null!=(t=this.dragImage)?t.remove():void 0},o}(e),r.exports=s},{}]},{},[]);return o("qing-sortable")});