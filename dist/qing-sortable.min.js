/* qing-sortable v0.0.1 | (c) Mycolorway Design | MIT License */
!function(t,e){"object"==typeof module&&module.exports?module.exports=e(require("jquery"),require("qing-module")):t.QingSortable=e(t.jQuery,t.QingModule)}(this,function(t,e){var r=require=function t(e,r,n){function o(a,s){if(!r[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var g=new Error("Cannot find module '"+a+"'");throw g.code="MODULE_NOT_FOUND",g}var l=r[a]={exports:{}};e[a][0].call(l.exports,function(t){var r=e[a][1][t];return o(r?r:t)},l,l.exports,t,e,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({"qing-sortable":[function(r,n,o){var i,a,s,u,g,l=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;i=null,a=null,u=t([]),g=null,s=function(e){function r(e){r.__super__.constructor.apply(this,arguments),this.items=t(this.opts.items),this.container=t(this.opts.container),this._checkOptions(),this.items.data("qingSortable",this),this.container.data("qingSortableItems",this.items),u=u.add(this.items),this.opts=t.extend({},r.opts,this.opts),this._render(),this._bind()}return l(r,e),r.opts={container:null,items:null,axis:"x"},r.prototype._checkOptions=function(){if(!(this.items.length>0))throw new Error("QingSortable: option items is required");if(!(this.container.length>0))throw new Error("QingSortable: option container is required")},r.prototype._render=function(){return this.items.each(function(t,e){return e.draggable=!0})},r.prototype._setDragImage=function(e){var r,n;return null!=(n=this.dragImage)&&n.remove(),r=t(e.currentTarget),this.dragImage=r.clone().addClass("qing-sortable-dragimage"),this.dragImage.css({width:r.width(),height:r.height()}),this.dragImage.prependTo(r.parent()),e.originalEvent.dataTransfer.setDragImage(this.dragImage[0],e.pageX-r.offset().left,e.pageY-r.offset().top)},r.prototype._getMousePosition=function(e){var r;return r=t(e.currentTarget),{x:e.pageX-r.offset().left,y:e.pageY-r.offset().top}},r.prototype._onStart=function(t){return this.dragging=!0,i=t},r.prototype._onEnd=function(){return this.dragging=!1,i=null},r.prototype._shouldCalculatePosition=function(e){return!!this.dragging&&(!t(e.target).data("qingSortable")&&(e.target!==a[0]&&e.target!==i[0]))},r.prototype._bind=function(){return this.items.on("dragstart.qingSortable",function(e){return function(r){var n;return e._setDragImage(r),e.mousePosition=e._getMousePosition(r),n=t(r.currentTarget).addClass("qing-sortable-placeholder"),a=n.clone().attr("qing-sortable-placeholder",!0),e._onStart(n)}}(this)),this.items.on("dragend.qingSortable",function(e){return function(r){var n;return n=t(r.currentTarget).removeClass("qing-sortable-placeholder qing-sortable-hide"),t.contains(document,a[0])&&(n.insertAfter(a),a.detach()),e._onEnd()}}(this)),this.container.on("dragenter.qingSortable",function(t){return function(e){return t.inContainer=!0,g=t.container}}(this)),this.container.on("dragleave.qingSortable",function(t){return function(e){if(e.target===e.currentTarget)return t.inContainer=!1,g=null}}(this)),t(document).on("dragover.qingSortable",function(e){return function(r){var n,o,s,l;if(e._shouldCalculatePosition(r))return a.detach(),n={x:r.pageX-e.mousePosition.x+i.outerWidth()/2,y:r.pageY-e.mousePosition.y+i.outerHeight()/2},s=g?g.data("qingSortableItems"):u,l=e._getSortedCenters(s,n),o=l[0].element,n[e.opts.axis]<l[0].center[e.opts.axis]?t(o).before(a):t(o).after(a),i.addClass("qing-sortable-hide")}}(this)),this.items.on("dragenter.qingSortable",function(e){return function(r){var n,o;if(e.inContainer)return n=t(r.currentTarget),o=t.contains(document,a[0])?a.index():i.index(),o<n.index()?n.after(a):n.before(a),i.addClass("qing-sortable-hide")}}(this))},r.prototype._getSortedCenters=function(e,r){var n;return n=e.map(function(e,n){var o,i,a,s;return o=t(n),s=o.offset(),i={x:s.left+o.outerWidth()/2,y:s.top+o.outerHeight()/2},a=Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)),{delta:a,element:n,center:i}}),n.sort(function(t,e){return t.delta-e.delta})},r.prototype.destroy=function(){var t;return u=u.not(this.items),this.items.off(".qingSortable"),null!=a&&a.remove(),null!=(t=this.dragImage)?t.remove():void 0},r}(e),n.exports=s},{}]},{},[]);return r("qing-sortable")});