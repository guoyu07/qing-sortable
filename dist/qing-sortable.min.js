/* qing-sortable v0.0.1 | (c) Mycolorway Design | MIT License */
!function(t,e){"object"==typeof module&&module.exports?module.exports=e(require("jquery"),require("qing-module")):t.QingSortable=e(t.jQuery,t.QingModule)}(this,function(t,e){var r=require=function t(e,r,n){function i(s,l){if(!r[s]){if(!e[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var u=r[s]={exports:{}};e[s][0].call(u.exports,function(t){var r=e[s][1][t];return i(r?r:t)},u,u.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({"qing-sortable":[function(r,n,i){var o,s=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;o=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return s(r,e),r.opts={el:document,groups:null,items:null,plugins:[]},r.id=1,r.getElementDimension=function(e){var r,n,i,o;return r=t(e),i=r.offset(),o=r.outerWidth(),n=r.outerHeight(),{left:i.left,top:i.top,width:o,height:n,center:{left:i.left+n/2,top:i.top+n/2},element:e}},r.excluded="[data-qing-sortable-excluded]",r.pointToDimension=function(t,e){var r,n,i,o,s,l;return s=Math.max,r=Math.abs,l=Math.sqrt,n={left:e.left+e.width/2,top:e.top+e.height/2},i=s(r(t[0]-n.left)-e.width/2,0),o=s(r(t[1]-n.top)-e.height/2,0),l(i*i+o*o)},r.prototype.activeItem=null,r.prototype.placeholder=null,r.prototype._setOptions=function(e){if(this.opts=t.extend({},r.opts,e),!this.opts.items)throw new Error("option items is required")},r.prototype._init=function(){return this.el=t(this.opts.el),this.id=r.id++,this._bind()},r.prototype._appendHelper=function(t){return this.helper=t.clone().addClass("qing-sortable-helper"),this.helper.outerWidth(t.outerWidth()),this.helper.outerHeight(t.outerHeight()),this.helper.attr("data-qing-sortable-excluded",!0),this.helper.prependTo(t.parent())},r.prototype._bind=function(){var e;return e=this.opts.items,this.el.on("dragstart.qingSortable"+this.id,e,function(e){return function(r){var n,i;return n=t(r.currentTarget),i=n.offset(),e._onDragStart(n),r.originalEvent.dataTransfer.setDragImage(e.helper.get(0),r.pageX-i.left,r.pageY-i.top)}}(this)),this.el.on("dragover.qingSortable"+this.id,function(t){return function(e){return t._onDragOver(e.pageX,e.pageY)}}(this)),this.el.on("dragend.qingSortable"+this.id,function(t){return function(e){return t._onDragEnd()}}(this))},r.prototype._onDragStart=function(t){return this.activeItem=t,this._appendHelper(t),this._generatePlaceholder(t),this._cacheDimensions()},r.prototype._lastDrag=null,r.prototype._lastNear=null,r.prototype._onDragOver=function(t,e){if(this.activeItem&&(!this._lastDrag||t!==this._lastDrag[0]||e!==this._lastDrag[1])&&(this._lastDrag=[t,e],this.nearDimension=this._findNearItemDimension(t,e),this.nearDimension&&!this._nearPlaceholder([t,e],this.nearDimension)))return this._movePlaceholderTo(this.nearDimension,[t,e]),this.activeItem.removeClass("qing-sortable-placeholder"),this.activeItem.addClass("qing-sortable-hide"),this._updateDimensions()},r.prototype._nearPlaceholder=function(t,e){var n;if(this.placeholder)return n=r.getElementDimension(this.placeholder),r.pointToDimension(t,n)<e.delta},r.prototype._onDragEnd=function(){if(this.activeItem)return this.activeItem.removeClass("qing-sortable-placeholder qing-sortable-hide"),this.placeholder.replaceWith(this.activeItem),this.helper.remove(),this.helper=null,this.activeItem=null,this.placeholder=null,this.nearDimension=null,this._lastDrag=null},r.prototype.destroy=function(){var t,e;return this.el.off(".qingSortable"+this.id),null!=(t=this.helper)&&t.remove(),this.helper=null,this.activeItem=null,null!=(e=this.placeholder)&&e.remove(),this.placeholder=null,this.nearDimension=null,this._lastDrag=null},r.prototype._movePlaceholderTo=function(e,r){var n;return n=t(e.element),"x"===this.opts.axis?r[0]<e.center.left?n.before(this.placeholder):n.after(this.placeholder):r[1]<e.center.top?n.before(this.placeholder):n.after(this.placeholder)},r.prototype._generatePlaceholder=function(t){return this.placeholder=t.clone().addClass("qing-sortable-placeholder")},r.prototype._findNearItemDimension=function(t,e){var n;return(n=function(n){return n.map(function(n){return n.delta=r.pointToDimension([t,e],n),n}).sort(function(t,e){return t.delta-e.delta})[0]})(this.opts.groups?n(this.dimensions).children:this.dimensions)},r.prototype._cacheDimensions=function(){var e;return e=function(t){return function(e){return e.find(t.opts.items).not(r.excluded).map(function(t,e){return r.getElementDimension(e)}).get()}}(this),this.dimensions=this.opts.groups?this.el.find(this.opts.groups).map(function(n){return function(n,i){var o;return o=r.getElementDimension(i),o.children=e(t(i),o.children),o}}(this)).get():e(this.el)},r.prototype._updateDimensions=function(){var e;return e=function(r,n){var i;if(i=t(r.element).offset(),r.left=i.left,r.top=i.top,r.children)return r.children.map(e)},this.dimensions.map(e)},r}(e),n.exports=o},{}]},{},[]);return r("qing-sortable")});