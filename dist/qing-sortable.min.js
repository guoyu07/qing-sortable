/* qing-sortable v0.0.1 | (c) Mycolorway Design | MIT License */
!function(t,e){"object"==typeof module&&module.exports?module.exports=e(require("jquery"),require("qing-module")):t.QingSortable=e(t.jQuery,t.QingModule)}(this,function(t,e){var r=require=function t(e,r,n){function o(i,s){if(!r[i]){if(!e[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[i]={exports:{}};e[i][0].call(c.exports,function(t){var r=e[i][1][t];return o(r?r:t)},c,c.exports,t,e,r,n)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({"qing-sortable":[function(r,n,o){var a,i,s,u,l,c=function(t,e){function r(){this.constructor=t}for(var n in e)f.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},f={}.hasOwnProperty;i=null,u=null,s=!1,l=function(t,e){var r;return null==e&&(e=100),r=null,function(){var n,o;return o=this,n=arguments,window.clearTimeout(r),r=window.setTimeout(function(){return t.apply(o,n)},e)}},a=function(e){function r(e){if(r.__super__.constructor.apply(this,arguments),this.sortable=t(this.opts.sortable),!(this.sortable.length>0))throw new Error("QingSortable: option sortable is required");this.opts=t.extend({},r.opts,this.opts),this._render(),this._bind()}return c(r,e),r.opts={container:null,connect:null,sortable:null,customDragImage:!1},r.prototype._render=function(){return this.sortable.each(function(t,e){return e.draggable=!0})},r.prototype._bind=function(){return this.sortable.on("dragstart.qingSortable",function(e){return function(r){var n,o;return e.dragging=!0,n=t(r.currentTarget),e.opts.customDragImage&&(o=n.clone().addClass("qing-sortable-dragimage"),o.prependTo(n.parent()),r.dataTransfer.setData("Test","some data"),r.originalEvent.dataTransfer.setDragImage(o[0],r.pageX-n.offset().left,r.pageY-n.offset().top)),e.relative={x:r.pageX-n.offset().left,y:r.pageY-n.offset().top},i=n,n.addClass("qing-sortable-placeholder"),u=n.clone().attr("data-sort-placeholder",!0)}}(this)),this.sortable.on("dragend.qingSortable",function(e){return function(r){var n;return n=t(r.currentTarget),n.removeClass("qing-sortable-placeholder"),n.removeClass("xxx"),t.contains(document,u[0])&&(n.insertAfter(u),u.detach()),i=null,e.dragging=!1}}(this)),t(this.opts.container).on("dragenter.qingSortable",function(){return s=!0}),t(this.opts.container).on("dragleave.qingSortable",function(){return s=!1}),t(document).on("dragover.qingSortable",function(e){return function(r){var n,o,a,l,c;if(0===e.sortable.filter(r.target).length&&!(t(e.opts.container).filter(r.target).length>0||t.contains(t(e.opts.container)[0],r.target))){if(e.opts.connect){if(t(e.opts.connect).filter(r.target).length>0)return;if(t.contains(t(e.opts.connect)[0],r.target))return}if(!s&&e.dragging)return u.detach(),o={x:r.pageX-e.relative.x+i.outerWidth()/2,y:r.pageY-e.relative.y+i.outerHeight()/2},n=e.sortable.map(function(e,r){var n,a,i,s;return n=t(r),s=n.offset(),a={x:s.left+n.outerWidth()/2,y:s.top+n.outerHeight()/2},i=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)),{delta:i,element:r,center:a}}),c=n.sort(function(t,e){return t.delta-e.delta}),l=c[0].element,a="inline"===e.opts.type?o.x<c[0].center.x?"before":"after":o.y<c[0].center.y?"before":"after",t(l)[a](u).addClass("yyy").siblings().removeClass("yyy").end()}}}(this)),this.sortable.on("dragenter.qingSortable",function(e){return function(r){var n,o,a,s;if(n=t(r.currentTarget),a=t(e.opts.container).add(e.opts.connect).filter(function(e,n){return t.contains(n,r.currentTarget)}),a.length>0)return o=t.contains(document,u[0])?u.index():i.index(),s=o<n.index()?"after":"before",n[s](u),i.addClass("xxx")}}(this))},r.prototype.destroy=function(){return this.sortable.off(".qingSortable"),null!=u?u.remove():void 0},r}(e),n.exports=a},{}]},{},[]);return r("qing-sortable")});